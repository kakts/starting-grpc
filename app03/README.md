# app03 realtime-reversi
リアルタイムリバーシアプリ

# ディレクトリ構成
TBD

# 仕様
双方向ストリームRPCを利用。
2つのクライアントが自由に手を打てるリアルタイムリバーシ

- サーバストリーミングRPCによるプレイヤー同士のマッチング
- ゲーム開始後、クライアントから非同期で情報を双方向ストリーミングで送り合う


## 流れ
- プレイヤーマッチング処理
- マッチングリクエスト時、部屋がなければホストとして部屋を作成する
- 部屋があれば、そのホストとマッチング
- マッチングの成立はサーバストリーミングRPCで非同期に受け取る
- マッチング成立後、クライアントは双方向ストリーミングリクエストを送信
- 双方向ストリーミングRPCのリクエストは下記の2種類
    - ゲーム開始
    - リバーシの手
- サーバ側は、プレイヤー双方がゲーム開始を送った時、相手が手を送った時など、サーバ側の状態変化に応じてクライアントにレスポンスする
- 構造体はサーバ・クライアント側で共用できるようにする。構造体とProtbufが生成する構造体との変換処理も共用

## ルール
- 黒白の2色に分かれて対戦
- 盤面は8✖︎8
- 相手の色の石を自分の色の意思で挟むとひっくり返せる
- 通常のリバーシと異なり、連続して石を打てる
- 石を打った後は5秒間　次の石を打てない
- お互いにおける場所がなくなったらゲーム終了
- ゲーム終了時に石の数が多い方が勝ち　同数なら引き分け

## ゲーム盤面のロジックについて
基本ロジックの仕様

- 盤面を8✖︎8のセルとそれを囲む壁で表現する。そのために10✖︎10の二次元配列を用いる
- あるセルに石を置けるかどうかは、実際にそのセルに石をおいたと仮定して、ひっくり返せる石があるかを調べる
- ひっくり返せるかどうかは、そのセルから縦横斜めの8方向を操作して、その方向に相手の石が続いており、かつ終端に自分の石があるかを調べる
- ゲームの終了は、自分と相手どちらも置ける石がない場合となる